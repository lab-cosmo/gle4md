<script type="text/javascript">
//Parses GLE-specific parameters

//$gle_wmax=$_POST['wmax'];       if ($gle_wmax=="")  $gle_wmax=4000;
gle_tgt   = typeof pageQuery.tgt   !== "undefined" ? pageQuery.tgt   : "kv";
switch (gle_tgt) {
case "kv": libroot=libroot+"optimal/kv_"; break;
case "kh": libroot=libroot+"optimal/kh_"; break;
}
gle_range = typeof pageQuery.range !== "undefined" ? pageQuery.range : "4-4";
xset=gle_range.split("-"); 
gle_ns=xset[0]; gle_ww=xset[1];

gle_w0  = typeof pageQuery.w0  !== "undefined" ? pageQuery.w0  : 40;
gle_uw0 = typeof pageQuery.uw0 !== "undefined" ? pageQuery.uw0 : "cm1";

DESC="# Generated at http://imx-cosmo.github.io/gle4md \n\
# Please cite: \n\
# M. Ceriotti, G. Bussi and M. Parrinello, J. Chem. Theory Comput. 6, 1170 (2010) \n\
# M. Ceriotti, G. Bussi and M. Parrinello, Phys. Rev. Lett. 102, 020601 (2009) \n\
# Optimal-sampling GLE. Enforces efficient sampling of the "+(gle_tgt=="kv"?"potential":"total")+" energy \n\
# by an appropriate colored noise. The parameters were picked from \n\
# $cvsroot$gle_range.a, \n\
# and shifted so that they span a range between \n\
# &omega;min="+(gle_w0*Math.pow(10.0,-gle_ww*0.5))+"&nbsp;"+unitname(gle_uw0)+" and &omega;max="+(gle_w0*Math.pow(10.0,gle_ww*0.5))+"&nbsp;"+unitname(gle_uw0)+" \n\
";

HELP="\
     Optimal-sampling GLE: tries to minimize the correlation time for sampling \n\
     potential or total energy for normal modes over a broad frequency range, \n\
     geometrically centered at &omega;0. \n\
     Enforces fluctuation-dissipation theorem, so canonical sampling will result.\n\
";
</script>

<div class='label'>Optimize</div>&nbsp;<select name="tgt" onchange='this.form.submit()'>
<script type="text/javascript">
mkOption(gle_tgt,"kv","Potential nrg");
mkOption(gle_tgt,"kh","Total nrg");
</script>
</select><br/>
<div class='label'>Ns/Range</div>&nbsp;<select name="range" onchange='this.form.submit()'>
<script type="text/javascript"> 
mkOption(gle_range,"2-1","Ns=2, &omega;max/&omega;min=10^1");
mkOption(gle_range,"2-2","Ns=2, &omega;max/&omega;min=10^2");
mkOption(gle_range,"2-3","Ns=2, &omega;max/&omega;min=10^3");
mkOption(gle_range,"2-4","Ns=2, &omega;max/&omega;min=10^4");
mkOption(gle_range,"2-6","Ns=2, &omega;max/&omega;min=10^6");
mkOption(gle_range,"4-2","Ns=4, &omega;max/&omega;min=10^2");
mkOption(gle_range,"4-3","Ns=4, &omega;max/&omega;min=10^3");
mkOption(gle_range,"4-4","Ns=4, &omega;max/&omega;min=10^4");
mkOption(gle_range,"4-5","Ns=4, &omega;max/&omega;min=10^5");
mkOption(gle_range,"4-6","Ns=4, &omega;max/&omega;min=10^6");
mkOption(gle_range,"6-4","Ns=6, &omega;max/&omega;min=10^4");
mkOption(gle_range,"6-5","Ns=6, &omega;max/&omega;min=10^5");
mkOption(gle_range,"6-6","Ns=6, &omega;max/&omega;min=10^6");
mkOption(gle_range,"6-8","Ns=6, &omega;max/&omega;min=10^8");
mkOption(gle_range,"8-4","Ns=8, &omega;max/&omega;min=10^4");
mkOption(gle_range,"8-6","Ns=8, &omega;max/&omega;min=10^6");
mkOption(gle_range,"8-8","Ns=8, &omega;max/&omega;min=10^8");
</script>
</select><br/>
<script type="text/javascript"> 
mkField(gle_w0,"w0","&omega;0 ",gle_uw0,"freq");
</script>

<b>Optimal freq. range:</b><br/>
<script type="text/javascript"> 
echo "
&omega;min="+(gle_w0*Math.pow(10.0,-gle_ww*0.5))+"&nbsp;"+unitname(gle_uw0)+",&nbsp;"+"
&omega;max="+(gle_w0*Math.pow(10.0,gle_ww*0.5))+"&nbsp;"+unitname(gle_uw0)+"
";
</script>

<script type="text/javascript"> 
gle_iw0=2*Math.PI*conv_u2i(gle_w0,gle_uw0,"freq");  //we read a frequency but need an ANGULAR frequency

AMAT=readMatrix(libroot+gle_range+".a", gle_iw0); 
CMAT="";
</script>
